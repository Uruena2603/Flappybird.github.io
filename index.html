<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Flappy Bird Enhanced Edition - Un juego clásico mejorado con múltiples niveles y características avanzadas"
    />
    <meta
      name="keywords"
      content="flappy bird, juego, javascript, html5, canvas"
    />
    <meta name="author" content="Uruena2603" />

    <title>Flappy Bird - Enhanced Edition</title>

    <!-- Preconnect para optimización -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />

    <!-- Estilos -->
    <link rel="stylesheet" href="./src/css/main.css" />

    <!-- Preload de assets críticos -->
    <link rel="preload" href="./assets/images/flappybird.png" as="image" />
    <link rel="preload" href="./assets/images/flappybirdbg.png" as="image" />

    <!-- PWA Manifest (para futuras mejoras) -->
    <!-- <link rel="manifest" href="./manifest.json"> -->

    <!-- Favicons -->
    <!-- <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png"> -->
  </head>
  <body>
    <!-- Pantalla de carga profesional -->
    <div id="loading-screen" class="loading-screen">
      <div class="loading-content">
        <h1>🎮 Flappy Bird Enhanced</h1>
        <div class="loading-bar-container">
          <div id="loading-bar" class="loading-bar"></div>
        </div>
        <p id="loading-text">Initializing...</p>
      </div>
    </div>

    <!-- Contenedor principal del juego -->
    <div class="game-container">
      <canvas id="board" class="level-1" width="360" height="640"></canvas>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <!-- Firebase Configuration - Carga condicional para desarrollo/producción -->
    <script>
      // Intentar cargar configuración de Firebase
      (function() {
        const script = document.createElement('script');
        script.src = './firebase-config.js';
        script.onerror = function() {
          console.log('🔥 Firebase: Configuración no encontrada - ejecutando en modo offline');
          console.log('ℹ️  Para habilitar Firebase, consulta FIREBASE_SETUP.md');
          
          // Crear configuración dummy para evitar errores
          window.getFirebaseConfig = () => null;
          window.isFirebaseConfigured = () => false;
          window.initializeFirebaseConfig = () => false;
          window.isDevelopment = window.location.hostname === 'localhost';
        };
        document.head.appendChild(script);
      })();
    </script>

    <!-- Scripts de los managers -->
    <script src="./src/js/managers/StorageManager.js"></script>
    <script src="./src/js/managers/AudioManager.js"></script>
    <script src="./src/js/managers/AssetManager.js"></script>
    <script src="./src/js/managers/FirebaseManager.js"></script>

    <!-- Scripts del juego -->
    <script src="./src/js/classes/Bird.js"></script>
    <script src="./src/js/classes/Pipe.js"></script>
    <script src="./src/js/classes/PipePool.js"></script>
    <script src="./src/js/classes/Game.js"></script>
    <script src="./src/js/main.js"></script>

    <!-- Service Worker para PWA (futuro) -->
    <!-- <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js');
        }
    </script> -->
  </body>
</html>
